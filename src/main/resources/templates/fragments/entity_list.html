<div th:fragment="list (title, entityFields, listViewPath, newViewPath, editViewPath, crudPath, objects)">
  <div>
    <h5 th:text="${title}">List</h5>
  </div>      
  <form th:if="${not #strings.isEmpty(newViewPath)}" th:action="${newViewPath}" method="get">
    <div>
      <button type="submit" class="btn btn-primary">New</button>
    </div>
  </form>
  <form th:action="${listPath}" method="get">

    <div>
      <label>Search</label>
      <input type="text" name="search" placeholder="search...">
      <button type="submit" class="btn btn-primary">Search</button>
    </div>
  </form>
  <div>
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th>#</th>
          <section th:each="field: ${entityFields}">
            <th th:text="@{__${@viewFieldUtil.getDisplayName(field.name)}__}"></th>
          </section>
          <td th:if="${not #strings.isEmpty(editViewPath)}"></td>
          <td th:if="${not #strings.isEmpty(crudPath)}"></td>
        </tr>
      </thead>
      <tbody>
        <tr th:each="object, counter: ${objects.content}">
          <td th:text="${counter.count}"></td>
            <section th:each="field: ${entityFields}">
              <div th:if="${not field.manyAssociation}">
                <td th:if="not @{__${@viewFieldUtil.isAssociationFieldAndListAvailableAndNotNullOrEmpty(field, listObjects, object)}__}" th:text="@{__${@viewFieldUtil.getFieldValue(object, field.getName())}__}"></td>
                <td th:if="@{__${@viewFieldUtil.isAssociationFieldAndListAvailableAndNotNullOrEmpty(field, listObjects, object)}__}" th:text="@{__${@viewFieldUtil.getFieldValueFromSelectList(object, field.getName(), listObjects)}__}"></td>            
              </div>          
              <div th:if="${field.manyAssociation}">
                <td>
                  <table>
                    <tbody th:with="listObjectArray=@{__${@viewFieldUtil.getFieldSelectedList(object, field.getName(), listObjects)}__}">
                      <section th:each="listObject: ${listObjectArray}">
                        <tr th:text="${listObject}"></tr>
                      </section>
                    </tbody>
                  </table>
                </td>
              </div>
            </section>
          <td th:if="${not #strings.isEmpty(editViewPath)}">
            <form th:action="${editViewPath} +  @{/} + ${object.id}" method="get">
              <div>
                <button type="submit" class="btn btn-primary">Edit</button>
              </div>
            </form>
         </td>
         <td th:if="${not #strings.isEmpty(crudPath)}">
            <form th:action="${crudPath} + @{/delete?id=} + ${object.id}" method="post">
              <div>
                <button type="submit" class="btn btn-primary">Delete</button>
              </div>
            </form>
          </td>               
        </tr>
      </tbody>
    </table>
    <div th:if="${objects.totalPages > 0}" class="pagination"
         th:each="pageNumber : ${pageNumbers}">
      <a th:href="${listPath} + '?size=' + ${objects.size} + '&page=' +${pageNumber}"
         th:text=${pageNumber}
         th:class="${pageNumber==objects.number + 1} ? active"></a>
    </div>
  </div>
</div>  